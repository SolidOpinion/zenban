{"version":3,"sources":["app.js","environment.js","main.js","controllers/login.js","controllers/logout.js","controllers/signup.js","controllers/welcome.js","models/auth.js","models/usersData.js","/Users/Mykola/Desktop/zenban/src/app.html","/Users/Mykola/Desktop/zenban/src/controllers/login.html","/Users/Mykola/Desktop/zenban/src/controllers/logout.html","/Users/Mykola/Desktop/zenban/src/controllers/signup.html","/Users/Mykola/Desktop/zenban/src/controllers/welcome.html"],"names":["App","eventAggregator","auth","currentRoute","isPipelineOptions","configureRouter","config","router","map","route","moduleId","nav","title","name","navigationSuccess","event","instruction","fragment","attached","subscription","subscribe","bind","detached","dispose","isLogged","user","debug","testing","api","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","developmentLogging","plugin","start","then","setRoot","Login","email","password","error","login","navigate","catch","message","length","Logout","activate","logout","Signup","usersData","signup","userInfo","self","addNew","content","Welcome","heading","info","data","isForm","users","Auth","httpClient","http","localStorage","getItem","getUser","resolve","reject","post","token","response","setItem","console","log","x","withHeader","get","removeItem","searchUrl","baseUrl","UsersData","getList","search","term","getOne","id","update","put"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {EventAggregator} from 'aurelia-event-aggregator';\nimport {inject} from 'aurelia-dependency-injection';\nimport {bindable} from 'aurelia-framework';\nimport {Auth} from './models/auth';\n\n\n@inject(EventAggregator, Auth)\nexport class App {\n\n    constructor(eventAggregator, auth) {\n        this.eventAggregator = eventAggregator;\n        this.currentRoute = \"/\";\n        this.isPipelineOptions = true;\n        this.auth = auth;\n    }\n\n    configureRouter(config, router) {\n        this.router = router;\n\n        config.map([\n            { route: \"\", moduleId: \"controllers/welcome\", nav: true, title: \"Welcome\", name: \"welcome\"},\n            { route: \"signup\", moduleId: \"controllers/signup\", nav: false, title: \"Signup\", name: \"signup\"},\n            { route: \"login\", moduleId: \"controllers/login\", nav: false, title: \"Login\", name: \"login\"},\n            { route: \"logout\", moduleId: \"controllers/logout\", nav: false, title: \"Logout\", name: \"logout\"},\n            { route: \"secret\", moduleId: \"controllers/secret\", nav: true, title: \"Secret\", name: \"secret\"}\n        ]);\n    }\n\n    navigationSuccess(event) {\n        let instruction = event.instruction;\n        this.currentRoute = instruction.fragment;\n        if (this.currentRoute == \"/\" ) {\n          this.isPipelineOptions = true;\n        } else {\n          this.isPipelineOptions = false;\n        }\n    }\n\n    attached() {\n        this.subscription = this.eventAggregator.subscribe(\n          'router:navigation:success',\n          this.navigationSuccess.bind(this));\n    }\n\n    detached() {\n        this.subscription.dispose();\n    }\n\n    get isLogged() {\n        return this.auth.isLogged;\n    }\n\n    get user() {\n        return this.auth.user;\n    }\n\n}\n","export default {\n  debug: true,\n  testing: true,\n  api: \"http://localhost:5000\"\n};\n","import environment from './environment';\n\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n      .standardConfiguration();\n\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport {Auth} from '../models/auth';\nimport {Router} from \"aurelia-router\";\n\n@inject(Auth, Router)\nexport class Login {\n\n    email = \"\";\n    password = \"\";\n    error = \"\";\n\n    constructor(auth, router) {\n        this.auth = auth;\n        this.router = router;\n    };\n\n    login() {\n        this.auth.login(this.email, this.password)\n            .then(response => {\n                this.router.navigate('');\n            })\n            .catch(error => {\n                this.error = error.message;\n            });\n    };\n\n    get isLogged() {\n        return this.auth.isLogged;\n    }\n\n    get showError() {\n        if (this.error.length > 0) return true;\n        return false;\n    }\n}","import {inject} from 'aurelia-framework';\nimport {Auth} from '../models/auth';\nimport {Router} from \"aurelia-router\";\n\n@inject(Auth, Router)\nexport class Logout {\n\n    constructor(auth, router) {\n        this.auth = auth;\n        this.router = router;\n    };\n\n    activate() {\n        this.auth.logout();\n        this.router.navigate('#/login');\n    };\n}","import {inject} from 'aurelia-framework';\nimport {UsersData} from \"../models/usersData\";\nimport {Auth} from '../models/auth';\nimport {Router} from \"aurelia-router\";\n\n\n@inject(UsersData, Auth, Router)\nexport class Signup {\n\n    email = '';\n    name = '';\n    password = '';\n\n    constructor(usersData, auth, router) {\n        this.usersData = usersData;\n        this.auth = auth;\n        this.router = router;\n        this.error = '';\n    };\n\n    signup() {\n        var userInfo = { name: this.name, email: this.email, password: this.password }\n        var self = this;\n\n        this.usersData.addNew(userInfo)\n            .then(response => {\n                this.router.navigate('#/login');\n            })\n            .catch(error => {\n                this.error = error.content.message;\n            });\n    };\n\n    get showError() {\n        if (this.error.length > 0) return true;\n        return false;\n    }\n}","export class Welcome {\n\n    heading = 'Welcome to the Random Quotes App!';\n    info = 'You can get a random quote without logging in, but if you do log in you can get a super secret quote!';\n\n\n    constructor(usersData) {\n        this.data = usersData;\n        this.isForm = false;\n        this.user = {};\n        this.users = [];\n    }\n}","import {inject} from 'aurelia-framework';\nimport {HttpClient} from \"aurelia-http-client\";\nimport environment from '../environment';\n\n@inject(HttpClient)\nexport class Auth {\n\n    constructor(httpClient) {\n        this.isLogged = false;\n        this.user = {};\n\n        this.http = httpClient;\n\n        if (localStorage.getItem('zenBanAuthToken')) {\n            this.getUser();\n        }\n\n    }\n\n    login(email, password) {\n        var self = this;\n        return new Promise(function(resolve, reject) {\n            self.http.post(environment.api + \"/api/auth\", { email: email, password: password })\n                .then(response => {\n                    self.token = response.content.token;\n                    localStorage.setItem('zenBanAuthToken', self.token);\n                    console.log(response);\n                    self.getUser();\n                    resolve();\n                })\n                .catch(error => {\n                    console.log(error);\n                    reject(error.content);\n                });\n        })\n    }\n\n    getUser() {\n        this.http.configure(x => {\n            x.withHeader('Authorization', localStorage.getItem('zenBanAuthToken'));\n        });\n\n        this.http\n            .get(environment.api + \"/api/user\")\n            .then(response => {\n                console.log(response);\n                this.user = response.content;\n                this.token = localStorage.getItem('zenBanAuthToken');\n                this.isLogged = true;\n            })\n            .catch(error => {\n                console.log(error);\n                this.token = '';\n                this.isLogged = false;\n                this.user = {};\n                localStorage.removeItem('zenBanAuthToken');\n            });\n\n    }\n\n    logout() {\n        this.token = '';\n        this.isLogged = false;\n        this.user = {};\n        localStorage.removeItem('zenBanAuthToken');\n    }\n\n\n}","import {inject} from \"aurelia-framework\";\nimport {HttpClient} from \"aurelia-http-client\";\nimport environment from '../environment';\n\nlet searchUrl = environment.api + \"/api/search/users\";\nlet baseUrl = environment.api + \"/api/user\";\n\n@inject(HttpClient)\nexport class UsersData {\n    constructor(httpClient) {\n        this.http = httpClient;\n    }\n\n    addNew(user) {\n        return this.http.post(baseUrl, user)\n            .then(response => {\n                return response.content;\n            })\n    }\n\n    getList() {\n        return this.http.get(baseUrl)\n            .then(response => {\n                return response.content;\n            })\n    }\n\n    search(term) {\n        return this.http.post(searchUrl, { search: term })\n            .then(response => {\n                return response.content;\n            })\n    }\n\n    getOne(id) {\n        return this.http.get(baseUrl + \"/\" + id)\n            .then(response => {\n                return response.content;\n            })\n    }\n\n    update(id, user) {\n        return this.http.put(baseUrl + \"/\" + id, user)\n            .then(response => {\n                return response.content;\n            })\n    }\n\n}",null,null,null,null,null],"sourceRoot":"../src"}